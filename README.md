# BIT_PPPRP

## Задание 2

Перевести приложение из предыдущего задания для работы через Istio. Для этого:
* написать скрипт для запуска Istio в вашем кластере, и настройки добавления лейблов для того, чтобы Istio начал автоматически внедрят sidecat контейнеры к вашим приложениям в Kubernetes. Также, в этом скрипте, при запуске Istio в вашем кластере, необходимо указать настройку, которая запрещает внешний трафик по умолчанию, если нет необходимых манифестов.
* написать все необходимые манифесты, чтобы теперь весь входящий трафик шел через Ingress Gateway
* теперь при обращении на endpoint GET /time вашего приложения, оно должно делать запрос на http://worldtimeapi.org/api/timezone/Europe/Moscow и возвращать пользователю значение поля datetime из запроса выше.
* создать манифейсты, которые разрешают внешний трафик на worldtimeapi.org
* в readme проекта опишите куда надо сделать запрос, чтобы получить результат(оставить с предыдущего задания, если ничего не поменялось).

## Последовательность действий 
### Шаг 0

Установливаем minikube и docker

### Шаг 1

Запускаем наш узел minikube
```bash
minikube start
```

### Шаг 2

Запускаем файл create.sh, который отвечает за манифесты сервиса, приложения и кода
```bash
sh create.sh
```

### Шаг 3
Далее в соседнем терминале получаем нужный url для подключения к сервису
```bash
minikube service my-service
```

### Шаг 4
Чтобы узнать текущее время, нужно выполнить: 
```bash
curl my_url/time
```  

Чтобы получить статистику, нужно выполнить:  
```bash
curl my_url/statistics
```  

### Шаг 5
Узнаем  название пода с помощью команды kubectl get pods -o wide, после получаем доступ к статистике

```bash
kubectl exec -it my_pod -- /bin/bash
cat statistics.txt
```
